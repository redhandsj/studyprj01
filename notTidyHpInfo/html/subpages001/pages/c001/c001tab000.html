<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>コンピュータアーキテクチャとは</title>
<!-- ------------------------------------------------------------------------------- -->
<SCRIPT src="../../../../js/commonHeaderSetting.js"></SCRIPT>
<!-- ------------------------------------------------------------------------------- -->
</head>
<body>
<h1>いきなりアーキテクトをやってと言われた時に備えて</h1>
<div id="toc"></div>
<!--
<img/>
<ul>
<li>全体サイズとしては3000文字が目安
<li>タイトルは28文字以内
<li>キーワードプランナーを使用
</ul>
 -->
<!-- 疑問点 -->
　開発業界にいると<strong class="bigfont_underline">『アーキテクチャ』</strong>や<strong class="bigfont_underline">『アーキテクト』</strong>という言葉を聞いた事がありませんか？<br>
　僕は、今日まで『アーキテクト』という種類の立場に立った事はありませんが、開発現場の実装の親玉という感じがして、もし
、自分が言われたらさぞ気持ちいいかもしれません。<br>
　その役割はソフトウェア開発の中でも、広範囲にわたり、その仕事の決断の影響力は実装そのもの全てに反映される責任重大な
役割である事は、想像つきます。<br>
　しかし、具体的に<strong class="bigfont_underline">どのような作業をし、どのように考え、どのようなアウトプットがあるか</strong>
は、アーキテクトという役割を担っていない開発者にとっては、ぼんやりとしか思い浮かびません。<br>
　かく言う僕もこの記事を書いている時点では、その作業の輪郭しか描けず、『いざ、やってみて！』となった時に必死になって
試行錯誤している自分の姿が簡単に想像できます。<br>
　その『いざ！』という場合に備えて、アーキテクトの概要から具体的作業に至るまでをまとめてみようかと思います。<br>
<!-- 答え -->
　さて、まとめるといっても何から始めるかといえばまず、『アーキテクチャ』という言葉の意味から調べて行きたいと思います。<br>
　先ほどから『アーキテクチャ』『アーキテクチャ』と連呼していますが、この言葉の意味さえ僕は結構曖昧な理解ですので。<br>
<!--
<h2>解決策提起</h2>
<h2>解決策根拠</h2>
-->

<h2>元々は建築用語</h2>
　『アーキテクチャ』の<strong class="bigfont_underline">語源は、古代ギリシア語で「建築技術」という意味</strong>があり、
僕たちソフトウェアに携わる人間が使う『アーキテクチャ』とは、正確には『コンピュータ・アーキテクチャ』と言わなければいけません。<br>
　元々は建物の建築様式などの建築に関する事であったが、時代を下っていくと、『庭』とか『船』にもその言葉は適用されてい
きました。そして、時代は下って、ソフトウェア開発のこの時代に「ものづくり」というくくりで適用されたようです。<br>
　『技術』という曖昧な意味から出発した言葉の為に、これらの用語は大変広い解釈を持つ事になったようです。<br>
　まずは、本家の建築学の中の狭義では、<strong class="bigfont_underline">構造や設計法工法を含めた設計思想</strong>
という意味がある様です。
　本家の『アーキテクチャ』と区別するために、ソフトウェアに適用された『アーキテクチャ』、つまり<strong class="bigfont_underline">『ソフトウェアアーキテクチャ』</strong>
にも同じように<strong class="bigfont_underline">設計思想</strong>という意味を持たせた。厳密には、未だに様々な解釈があ
るらしいが、それを追いかけている時間はないので、細かくは割愛します。

<h2>ソフトウェアアーキテクチャってどんな構成なのか</h2>
　意味的なものが分かったところで、ここからはソフトウェアアーキテクチャについて少し深堀りしていきます。この言葉自体広い
意味を持っている為、<strong class="bigfont_underline">開発時にアーキテクトが何をすべきか</strong>という指針がほしいところです。<br>
　そこで、ソフトウェアアーキテクチャを少し<strong class="bigfont_underline">部品にかみ砕いていくとビューと言われる部品に分かれる</strong>
ようです。それは、以下のようなものがあるらしいです。各ビューの詳細は、別途書いていきます。<br>
<ul>
<li>機能/ロジックビュー
<li>コードビュー
<li>開発/構造ビュー
<li>並列性/プロセス/スレッドビュー
<li>物理/配置ビュー
<li>ユーザー行動/フィードバックビュー
</ul>

<h2>そもそもアーキテクトってなんでいるの？</h2>
<h3>まずは、開発の歴史からどんな問題があったのか考えてみよう</h3>
　いきなり、複雑な事を考えても理解が追い付かないので、とりあえず、大きく考えてみましょう。ソフトウェア開発の役割として、時代が進むにつれて、ソフトウェアそのものの複雑さと比例して、<strong class="bigfont_underline">開発の役割も複雑化</strong>しています。<br>
　開発とは違うのですが、野球のピッチャーなどは、昔は完投が当然でルール上は交代はできても先発ピッチャーが基本的に１試合投げ切るのが当然でした。そして、いつの間にかリリーフ専門のピッチャーが登場し、さらに中継ぎ専門のピッチャーが出てきます。このように１つのポジションでも、試合を有利に進める為に役割の細分化が行われるのが世の常です。ただ、あまり無意味に複雑化しすぎるとそれはそれで弊害もありますが。<br>
　まず、大昔（といっても50年～40年ほど前でしょうか）、ソフトウェア開発は、現在ほどのソースコード量も、複雑なフレームワークもなく、まるで計算式を書くかのように上から下へとコーディングしたものが、機械語にコンパイルされて動いていました。この頃にアーキテクトという言葉が浸透していたかどうかはわかりませんが、少なくともソフトウェアを製造するにあたってスキップできない部分なので、誰かが担っていたのでしょう。<br>
　作成するものの規模が小さいという事は、工数もそほど大したものでもないのでしょう。そんな時代のアーキテクチャ規模を考えれば、専任者を用意する必要もなく、プログラマがその場で考え、脳内で思いついた事をそのまま指先に伝えてコーディングされ実行コードが作られていったのでしょう。つまり、設計開発が分離されておらず、<strong class="bigfont_underline">１人の開発者の中で定義・開発・コーディング、さらにテストの一連の流れが完結していた</strong>ものと思われます。<br>
　時代が下って、ソフトウェアの規模や種類の多様性が広がるにつれて、その開発作業は１人の開発者の脳内では収まりきらなくなってきた。そうなると必然的に<strong class="bigfont_underline">開発チームが発生し、開発作業に従事する人数も増えて</strong>きます。<br>
　ここで１つ問題が起こります。１つのプログラムを複数人数が作成する際に、<strong class="bigfont_underline">全体の統一性を維持するのが難しく</strong>なってきました。「統一性」とは、砕いていえば、「コードがきれいに整頓されて記載されているか？」や「重複したコードが正確に構造化されているか？」や「変数名などが一定の規則に従って命名されているか？」などのコードの読み易さに関する事から、「ＡさんとＢさんが作ったプログラムを結合して、ちゃんと動くのか？」のような品質に関する事まで１人で作った場合にはあまり考慮されてない問題が生まれてきました。<br>
　じゃあ、これらを解決する為にはどうしたらいいのでしょうか？<br>
<h3>開発の歴史は、人類の歴史そのものと同じ流れ</h3>
　少しここで大袈裟な話をしてみましょう。前項で、開発規模が大きくなった事による色んな問題が発生した事を書きました。この流れって開発の歴史だけではなく、<strong class="bigfont_underline">人類が歩んできた文明の歴史に重ね合わせて考える事も出来る</strong>んです。どういうことか？<br>
　学校で習ったかもしれませんが、世界四大文明というものがあります。（※最近では、少し僕の習った昭和の教科書とは異なるようなのですが、とりあえずここでは、僕の知識で話を進めます。）僕の習った教科書には、メソポタミア文明・エジプト文明・インダス文明・黄河文明が載っていたように記憶しています。これらの文明で共通している事があります。それは、<strong class="bigfont_underline">集団の規模が大きくなっていく</strong>という事です。<br>
　最初に人類が狩りなどをしていた時代には、おそらく家族単位程度で集団行動をしていたのでしょう。それから、複数の家族が集まって狩りをした方が、より効率よく獲物を獲得できる事に気づきます。さらに、農耕が始まると大規模集団で農業をする事で食料不足問題が軽減され、極端な話、餓死する可能性が限りなく低くなっていきました。そして、農耕を行う為に必要な土地を奪い合う為に、集団間に争いが発生します。という事は、より強い集団が、他の集団を征服し、より広い土地を獲得し、多くの食料を獲得し「生きる」という事での心配事がなくなっていきました。<br>
　しかし、集団が増えれば増えるほど１つの問題に行き当たります。ただ、一緒に暮らす人数を増やしたところで皆が皆、好き勝手な行動をしただけでは、ただ住所が同じなだけで、個々で行動した時代と生産性は何も上がっていません。多くの人数を獲得した集団は、その<strong class="bigfont_underline">リソースを効率よく生産性に結びつける事をしなければ、大人数になった意味がない</strong>のです。<br>
　そこで、それぞれに役割を決めていきます。狩りをする者、服を作る者、農耕をする者、道具を作る者などそれぞれが専門化され、役割が発生しました。<br>
　何かこれらの動きって、開発規模の増大の話と同じですね。つまり、より良く多様性や規模を実現する為には、より多くの開発者が開発に参加し、それらに<strong class="bigfont_underline">効率よく仕事を割り当てて開発作業を進める事で、より大規模なソフトウェアを短期間で開発する事が可能</strong>になります。<br>
<h3>役割分担の為に必要になるものとは</h3>
　では、人数が増えればどんな役割が必要になるのでしょうか？前項で書いた「○○する者」というのは、もちろんソフトウェア開発でも必要になります。少し話題を振り返ると、１人で開発されていた時代に、その１人の開発者の脳内で行われていた作業を複数人数に割り当てて専任化すればいいわけです。<br>
　まずは、設計。たまに、「自分はいきなりコーディングしているので設計なんて必要ない」という人がいます。俗に「いきなりコーディング」というやつです。一見それは、設計という過程を飛ばしているように見えますが、そうではありません。手がコードを書く前に、<strong class="bigfont_underline">必ず脳内で設計が行われています</strong>。「いや、俺は本能のままに指を動かしている」という人がいるかもしれませんが、私の理解の範囲を超えているので、ここではあえて無視します。<br>
　では、なぜ設計が行われていない様に見えるのでしょうか？それは、アウトプットが物理的に存在しないからです。設計の結果がソースコードと言えなくもないですが、それは、コーディングしている本人以外の人が確認できる形のあるものがソースコードなので、そう見えるだけなのです。設計という課程は見えなくても必ず行われています。<br>
　そして、その役割を開発者の脳内から出して、他の人に割り当てる際に必要なものは何でしょう。それは、設計図です。正確に言えば、<strong class="bigfont_underline">「設計の結果を設計者本人以外が確認できるアプトプット」</strong>です。<br>
　つまり、設計者とプログラムを書く人が物理的に異なる場合、設計者が設計した結果をプログラムを書く人に伝える必要があります。設計のアウトプットは、そのまま、プログラムを書く人のインプットになるのです。<br>
　今では、ソースコードに開発言語があるように、設計書にも統一的な記載を促す為に、UMLなど設計書用の言語が存在します。１人の人間の脳内で行われた設計の結果をできる限り正確にプログラムを書く人に伝える為に、両人が知っている言語で伝えるという事は当たり前の流れですね。<br>
　開発以外の実際の歴史に当てはめると、これは「言語」に当てはまります。つまり、自分以外の人に自分の脳内で描いたものを伝える為には、目に見える、もしくは、耳で聞こえるそして、その内容が正確に伝わる必要があるのです。その為に、集団での作業で、「言語」や「文字」が必要なのです。<br>
　これらのアプトプットにより、集団作業が可能になり、１人で何かをする為の時間を短縮したり、１人では不可能な作業が可能になったりするのです。普段から当たり前に使っている言葉や文字は、人類が他の生物を凌駕する為には、必然的に生まれてきた武器なのです。<br>
<h3>【ちょっと寄り道】バベルの塔の話</h3>
　「言語」が出てきたついでに、ちょっと本題からズレますが、皆さん「バベルの塔」という聖書に出てくるお話しを知っているでしょうか。これこそ、僕がずらずらと書いている事を分かりやすい物語にして現代に伝えています。<br>
　簡単にいうと、人間が一致団結して高い塔を建てていて、それが気に食わない神様は何とか塔の建設を中止させようと、作業している人間の言語をバラバラにしてしまい、建設作業を中断させたって話ですが、同じ形式で理解されるアウトプットがないと集団作業なんてとてもできないという事です。<br>
　バベルの塔の建設前は、人間の言葉は１つしかなかったが、このエピソードがあるから、世界に様々な言語があるという事になっているようです。昔の人の構成力もなかなか凄いと思います。<br>
<h3>人数が増えれば必要になる役割とは</h3>
　さて、ここまでで、<strong class="bigfont_underline">「集団作業では、役割分単が必要」</strong>と<strong class="bigfont_underline">「各役割をつなげて１つの結果を得るには的確なアウトプットが必要」</strong>という点が分かりました。<br>
　しかし歴史は進み、作業規模は大きくなるばかりです。ある程度の規模なら、結果を出すための流れの中で必要な役割を各自が理解していれば良かったのですが、ここでまた問題が発生します。<br>
　それは、<strong class="bigfont_underline">各自が自分の役割を理解しても結果につながっている事を確認する人がいない</strong>事です。<br>
　ある程度の単純作業なら一度流れを決めてしまえば、各自が自分の仕事をこなす事で一定の結果が得られるので、何の問題もないでしょう。ところが、最初に役割を決めた時とは状況が変化した場合にそれに対応する為に役割を変えたりする必要が出てきます。つまり、予定では、５人で１日あれば終わる作業でしたが、やってみたら１０人いなければ終わりそうにない事を途中で気づいたとしましょう。この時、作業をしている５人は当初の自分の役割はこなしているので、１日過ぎて作業が終わっていない事に始めて気づく事になります。<br>
　仕方ないのでもう１日作業すればいいのでしょうが、ここで、人間は気づきます。<strong class="bigfont_underline">「５人の他にもう１人、５人の作業を監視して終わりそうにない事に気づいた時点で、人数を増やすなり、予定を変更したりする役割が必要なんじゃないか？」</strong>と。<br>
　ここでは、簡単に１日程度の作業を例にしましたが、これが１年から２年に及ぶ巨大プロジェクトだったらどうでしょうか。１年たって実は終わってなかったので、もう１年やるという事になります。しかし、全体を見渡すという役割を置けば、１年よりもっと早く、予定と実体のズレを気づいて増員などで１年以内に作業を効率よく終わらせる事ができるでしょう。<br>
　この「全体を見渡す役割」が村では村長となり、街では町長となり、はては、国では王様となっていくのです。そして、少しでも効率よく集団をコントロールできた王が、効率悪い集団を組み込んで大きな国を作り歴史を動かしてく。つまり、競争で勝者となれるのです。<br>
　そんな事してまで勝者になって……という話は、それはそれで話したいのですが、長くなるのでまた別途話しましょう。<br>
<h3>「まとめる役割」が開発作業でいう管理者である</h3>
　<strong class="bigfont_underline">「まとめる役割」が作業効率を上げて、集団行動を促進させる</strong>事はなんとなく分かりました。開発作業も例外ではありません。例え、100人のプログラマが集まっても１つの目的に向かって管理する人がいなければ、100人で作業する意味はありません。<br>
　開発作業の場合、「まとめる役割」といってもまとめる観点などによっていくつかの言い方があります。<br>
　大きく分けると、マネージャは、そのプロジェクト全体の予算やスケジュールなどを管理（調整）する役です。そして、リーダーは、チームメンバーの役割毎に問題なく作業が進んでいるか？、予定外のアクシデントがないかなどを監視して何かあれば調整する役割を担っています。<br>
　開発作業が大規模になるにつれて、管理対象も多様化し、<strong class="bigfont_underline">まとめる役割の中でもさらにまとめる対象が細分化</strong>してきています。それは、規模に対して１人では担いきれない責任が発生した事になるのです。<br>
<h3>そしてアーキテクトへ…</h3>
　まとめる役割の細分化の１つが、<strong class="bigfont_underline">管理対象が開発しているソフトウェアそのものである場合の「まとめ役」</strong>として、アーキテクトというポジションが生まれたのです。<br>
<!--===============================================================================================================-->
<h2>アーキテクトはどんなことすればいいの？</h2>
<h3>「まとめ役」のアウトプットを考えてみる</h3>
　前項でアーキテクトの成り立ちについて書きました。そして、「役割分担」には、各役割間で状況を確認できる共通認識のフォーマットで作られたアウトプットがなければ、集団作業の意味がないということも話しました。でも、アーキテクトは一体<strong class="bigfont_underline">何を誰に伝えればいい</strong>のでしょうか？<br>
　例えば、設計者などは、設計書をアウトプットして、プログラマに伝えればいいという事はなんとなく分かります。プログラマもソースコードをアウトプットする事でソフトウェアを製造するという作業を担っている事はわかります。<br>
　ここで、よく混乱するのが、「まとめ役」のアウトプットです。直接の生産作業をしてない「まとめ役」は一体何を残せばいいのでしょうか？<br>
　「残す」という単語を使いましたが、正確には、「残す」前に大事なのは、「伝える事」です。「残す」という行為は、自分以外の人間に何かを伝える為の行為であるので、「残す」前に、<strong class="bigfont_underline">「誰に」「何を」伝えるか？</strong>という事を考えてみましょう。<br>
<h3>伝える目的って何だっけ？</h3>
　「伝える」事の大事さを考える前に、そもそも、「まとめ役」という役割は、何の為にいるのかを考えると、実際の生産作業に参加しているわけではなく。生産を効率よく行う為に、生産作業を監視してそれが正しく行われているかを判断し、正しくない場合は、それを正して集団作業を正しい結果に導くというのが役割です。<br>
　そうなると、監視上集める情報としては、「現在進行形でリアルタイムな情報」であり、「改善の余地はあるか」、かつ、「作業者のモチベーション」など、様々なインプットは想像に難くないが、肝心のアウトプットに関しては、割と曖昧な場合が多い。しかし、「まとめ役」という役割を考えると、その成果は、チームの状態そのものであって、これという形のあるものを生産するわけではない。<br>
　では、「まとめ役」であるアーキテクトもアウトプットがなくてもいいのか？<br>
<h3>「まとめ役」にもいろいろある</h3>
　役割は「まとめ役」で、直接生産ではなくとも、マネージャとアーキテクトには決定的な違いがあります。それは、<strong class="bigfont_underline">生産物の製造に手を加える立場かどうか</strong>です。<br>
　単純にスケジュール管理や人事管理などのチーム運営に関わるのであれば、前項のようにインプットを考える際に生産物を意識したものを考えなくてもよいのですが、アーキテクトは話が違います。同じ「まとめ役」とはいっても、「まとめる対象」が違うのです。<br>
　じゃあ、アーキテクトが、まとめる対象とは何でしょう？、それは、<strong class="bigfont_underline">「生産物回りの環境」</strong>です。ちょっとややこしい表現になってしまいましたが、要するに、<strong class="bigfont_underline">「生産物をどのように組み立てるのかを決める設計図」</strong>です。<br>
　まだ、わかりにくいですね。そもそも、生産の役割として、設計・製造・テストがあります。まぁ、製造とテストがアーキテクトと違う事はなんとなくわかると思います。しかし、設計に関しては、違いが分かりにくいですね。<br>
<h3>「アーキテクチャ設計」と「普通の設計」って何が違うの？</h3>
　では、建築物に例えてみましょう。<br>
　まず、「普通の設計」とは、「部屋割り」「階段の段数」「部屋の窓の大きさ」「部屋の壁の模様」などです。まぁ、他にもいろいろあると思いますけど、思いつくままに書くとこんな感じです。<br>
　で、「アーキテクチャ」とは、「建物をどこに建てるか？」「何階建てか？」「素材は木造か鉄筋か？」などです。<br>
　どちらも一見、建築物を建てる際の設計における決定事項に見えますが、決定的な違いがあります。それは、<strong class="bigfont_underline">「建築を開始した後の変更コスト」</strong>です。<br>
　例えば、「普通の設計」における「部屋割り」を例にとると、建築中に突然、この部屋とこの部屋をつなげて１つにしたいなどと仕様変更があった場合に、理論上は２つの部屋の間の壁を取り除くという追加作業が発生します。しかし、「建物をどこに建てるか？」において、突然、やっぱり違う住所にしたい場合はどうでしょう。その場合、その土地の調査などからやり直すとしたら、変更になった段階にもよりますが、とんでもない追加作業が発生する可能性があります。<br>
　これらの考えをソフトウェアに置きかえても同じ事です。但し、どこまで大変な事かをアーキテクチャと呼ぶかは、未だに固定的な定義がなくケースバイケースです。<br>
　しかし、「アーキテクチャ設計」と「設計」の関係は、<strong class="bigfont_underline">「アーキテクチャ設計」の土台の上に「設計」というブロックが置かれている構造</strong>になる事は普遍的です。<br>
　なので、<strong class="bigfont_underline">「アーキテクチャ設計」と「設計」を分ける基準は、「変更コスト」で考えること</strong>で１つの基準になると思います。<br>
<h3>「アーキテクチャ設計」の成果物は何ぞや？</h3>
　ここで、議論の入り口に戻って、アーキテクトのアウトプットを考えてみましょう。<br>
　まぁ、結局「設計」は「設計」ですので、結論を言えば、<strong class="bigfont_underline">生産物に関わる情報を図なり文なりでアウトプットし、設計・製造・テストなど生産に関わる全ての人に伝える</strong>必要があります。<br>
　何故なら、そのアーキテクチャの土台の上で、全ての生産物が生産されるのですから。<br>
<!--===============================================================================================================-->
<h2>アーキテクチャ設計の具体的な進め方は？</h2>
<h3></h3>






<!--===============================================================================================================-->
<h2>具体的な進め方は？</h2>
一応
<ol>
<li>アーキテクチャ要件の洗出し
<li>機能的なアーキテクチャ設計
<li>配置設計
<li>製品の適用
	<ul>
	<li>プルーフ・オブ・コンセプト
	</ul>
<li>性能見積
	<ul>
	<li>ベンチマーク
	</ul>
<li>セキュリティ検討
</ol>





<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><hr>
<!--
　あああああ<br>
　あああああ<br>
　あああああ<br>
<h2>小見出し</h2>
<ul>
<li>
<li>
	<ol>
	<li>
	<li>
	<li>
	</ol>
<li>
</ul>
<h2>まとめ</h2>
結論
<h2>CTA</h2>
広告とか。。。
 -->


<h2>参考</h2>
<ul>
<li>https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3
<li>https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%BB%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3
<li>http://jibun.atmarkit.co.jp/lskill01/special/arc07/arc02.html
<li>http://www.itmedia.co.jp/keywords/it_architecture_kandokoro.html
</ul>

</body>
</html>